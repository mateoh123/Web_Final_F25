{"ast":null,"code":"import axios from \"axios\";\nimport html2canvas from \"html2canvas\";\nconst CaptureScreenshot = async (element, imageFileName, droppedItems = []) => {\n  try {\n    // Capture the screenshot\n    const canvas = await html2canvas(element, {\n      useCORS: true,\n      allowTaint: true,\n      backgroundColor: \"#ffffff\",\n      scale: 2,\n      logging: false\n    });\n\n    // Convert canvas to blob\n    const blob = await new Promise(resolve => {\n      canvas.toBlob(resolve, \"image/png\", 1.0);\n    });\n\n    // Create FormData and upload to Cloudinary\n    const formData = new FormData();\n    formData.append(\"file\", blob, `${imageFileName}.png`);\n    formData.append(\"upload_preset\", \"outfits_preset\"); // Make sure this preset exists in your Cloudinary\n\n    console.log(\"Uploading to Cloudinary...\");\n    const cloudinaryResponse = await axios.post(\"https://api.cloudinary.com/v1_1/dmjzidsiy/image/upload\", formData);\n    const imageUrl = cloudinaryResponse.data.secure_url;\n    console.log(\"Uploaded to Cloudinary:\", imageUrl);\n\n    // Save to JSON server with clothing items\n    const outfitData = {\n      name: `Outfit ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,\n      image: imageUrl,\n      items: droppedItems.map(item => item.id),\n      // Save the clothing IDs\n      createdAt: new Date().toISOString()\n    };\n    console.log(\"Saving to JSON server...\");\n    const jsonServerResponse = await axios.post(\"http://localhost:3001/outfits\", outfitData);\n    console.log(\"Saved to JSON server:\", jsonServerResponse.data);\n    return {\n      success: true,\n      cloudinaryUrl: imageUrl,\n      outfitId: jsonServerResponse.data.id\n    };\n  } catch (error) {\n    console.error(\"Error capturing/uploading screenshot:\", error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\n_c = CaptureScreenshot;\nexport default CaptureScreenshot;\nvar _c;\n$RefreshReg$(_c, \"CaptureScreenshot\");","map":{"version":3,"names":["axios","html2canvas","CaptureScreenshot","element","imageFileName","droppedItems","canvas","useCORS","allowTaint","backgroundColor","scale","logging","blob","Promise","resolve","toBlob","formData","FormData","append","console","log","cloudinaryResponse","post","imageUrl","data","secure_url","outfitData","name","Date","toLocaleDateString","toLocaleTimeString","image","items","map","item","id","createdAt","toISOString","jsonServerResponse","success","cloudinaryUrl","outfitId","error","message","_c","$RefreshReg$"],"sources":["/Users/mateohernandez/Desktop/React JS FInal Project/reactjsfinal/src/components/CaptureScreenshot.js"],"sourcesContent":["import axios from \"axios\";\nimport html2canvas from \"html2canvas\";\n\nconst CaptureScreenshot = async (element, imageFileName, droppedItems = []) => {\n  try {\n    // Capture the screenshot\n    const canvas = await html2canvas(element, {\n      useCORS: true,\n      allowTaint: true,\n      backgroundColor: \"#ffffff\",\n      scale: 2,\n      logging: false,\n    });\n\n    // Convert canvas to blob\n    const blob = await new Promise((resolve) => {\n      canvas.toBlob(resolve, \"image/png\", 1.0);\n    });\n\n    // Create FormData and upload to Cloudinary\n    const formData = new FormData();\n    formData.append(\"file\", blob, `${imageFileName}.png`);\n    formData.append(\"upload_preset\", \"outfits_preset\"); // Make sure this preset exists in your Cloudinary\n\n    console.log(\"Uploading to Cloudinary...\");\n    const cloudinaryResponse = await axios.post(\n      \"https://api.cloudinary.com/v1_1/dmjzidsiy/image/upload\",\n      formData\n    );\n\n    const imageUrl = cloudinaryResponse.data.secure_url;\n    console.log(\"Uploaded to Cloudinary:\", imageUrl);\n\n    // Save to JSON server with clothing items\n    const outfitData = {\n      name: `Outfit ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,\n      image: imageUrl,\n      items: droppedItems.map((item) => item.id), // Save the clothing IDs\n      createdAt: new Date().toISOString(),\n    };\n\n    console.log(\"Saving to JSON server...\");\n    const jsonServerResponse = await axios.post(\n      \"http://localhost:3001/outfits\",\n      outfitData\n    );\n\n    console.log(\"Saved to JSON server:\", jsonServerResponse.data);\n\n    return {\n      success: true,\n      cloudinaryUrl: imageUrl,\n      outfitId: jsonServerResponse.data.id,\n    };\n  } catch (error) {\n    console.error(\"Error capturing/uploading screenshot:\", error);\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n};\n\nexport default CaptureScreenshot;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,aAAa;AAErC,MAAMC,iBAAiB,GAAG,MAAAA,CAAOC,OAAO,EAAEC,aAAa,EAAEC,YAAY,GAAG,EAAE,KAAK;EAC7E,IAAI;IACF;IACA,MAAMC,MAAM,GAAG,MAAML,WAAW,CAACE,OAAO,EAAE;MACxCI,OAAO,EAAE,IAAI;MACbC,UAAU,EAAE,IAAI;MAChBC,eAAe,EAAE,SAAS;MAC1BC,KAAK,EAAE,CAAC;MACRC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;IACA,MAAMC,IAAI,GAAG,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAK;MAC1CR,MAAM,CAACS,MAAM,CAACD,OAAO,EAAE,WAAW,EAAE,GAAG,CAAC;IAC1C,CAAC,CAAC;;IAEF;IACA,MAAME,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEN,IAAI,EAAE,GAAGR,aAAa,MAAM,CAAC;IACrDY,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAC,CAAC;;IAEpDC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;IACzC,MAAMC,kBAAkB,GAAG,MAAMrB,KAAK,CAACsB,IAAI,CACzC,wDAAwD,EACxDN,QACF,CAAC;IAED,MAAMO,QAAQ,GAAGF,kBAAkB,CAACG,IAAI,CAACC,UAAU;IACnDN,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEG,QAAQ,CAAC;;IAEhD;IACA,MAAMG,UAAU,GAAG;MACjBC,IAAI,EAAE,UAAU,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,IAAI,IAAID,IAAI,CAAC,CAAC,CAACE,kBAAkB,CAAC,CAAC,EAAE;MACpFC,KAAK,EAAER,QAAQ;MACfS,KAAK,EAAE3B,YAAY,CAAC4B,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,CAAC;MAAE;MAC5CC,SAAS,EAAE,IAAIR,IAAI,CAAC,CAAC,CAACS,WAAW,CAAC;IACpC,CAAC;IAEDlB,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvC,MAAMkB,kBAAkB,GAAG,MAAMtC,KAAK,CAACsB,IAAI,CACzC,+BAA+B,EAC/BI,UACF,CAAC;IAEDP,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEkB,kBAAkB,CAACd,IAAI,CAAC;IAE7D,OAAO;MACLe,OAAO,EAAE,IAAI;MACbC,aAAa,EAAEjB,QAAQ;MACvBkB,QAAQ,EAAEH,kBAAkB,CAACd,IAAI,CAACW;IACpC,CAAC;EACH,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdvB,OAAO,CAACuB,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;IAC7D,OAAO;MACLH,OAAO,EAAE,KAAK;MACdG,KAAK,EAAEA,KAAK,CAACC;IACf,CAAC;EACH;AACF,CAAC;AAACC,EAAA,GA1DI1C,iBAAiB;AA4DvB,eAAeA,iBAAiB;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}