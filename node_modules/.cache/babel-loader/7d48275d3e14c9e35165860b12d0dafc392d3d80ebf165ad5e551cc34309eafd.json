{"ast":null,"code":"import axios from \"axios\";\nimport html2canvas from \"html2canvas\";\n\n// Renamed to lowercase to ensure React never treats it as a component\nconst captureScreenshot = async (element, imageFileName, droppedItems = []) => {\n  try {\n    // Capture the screenshot\n    const canvas = await html2canvas(element, {\n      useCORS: true,\n      allowTaint: true,\n      backgroundColor: \"#ffffff\",\n      scale: 2,\n      logging: false\n    });\n\n    // Convert canvas to blob\n    const blob = await new Promise(resolve => {\n      canvas.toBlob(resolve, \"image/png\", 1.0);\n    });\n\n    // Upload to Cloudinary\n    const formData = new FormData();\n    formData.append(\"file\", blob, `${imageFileName}.png`);\n    formData.append(\"upload_preset\", \"outfits_preset\");\n    const cloudinaryResponse = await axios.post(\"https://api.cloudinary.com/v1_1/dmjzidsiy/image/upload\", formData);\n    const imageUrl = cloudinaryResponse.data.secure_url;\n\n    // Save to JSON server\n    const outfitData = {\n      name: `Outfit ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,\n      image: imageUrl,\n      items: droppedItems.map(item => item.id),\n      createdAt: new Date().toISOString()\n    };\n    const jsonServerResponse = await axios.post(\"http://localhost:3001/outfits\", outfitData);\n    return {\n      success: true,\n      cloudinaryUrl: imageUrl,\n      outfitId: jsonServerResponse.data.id\n    };\n  } catch (error) {\n    console.error(\"Error capturing/uploading screenshot:\", error);\n    return {\n      success: false,\n      error: error.message\n    };\n  }\n};\nexport default captureScreenshot;","map":{"version":3,"names":["axios","html2canvas","captureScreenshot","element","imageFileName","droppedItems","canvas","useCORS","allowTaint","backgroundColor","scale","logging","blob","Promise","resolve","toBlob","formData","FormData","append","cloudinaryResponse","post","imageUrl","data","secure_url","outfitData","name","Date","toLocaleDateString","toLocaleTimeString","image","items","map","item","id","createdAt","toISOString","jsonServerResponse","success","cloudinaryUrl","outfitId","error","console","message"],"sources":["/Users/mateohernandez/Desktop/React JS FInal Project/reactjsfinal/src/components/CaptureScreenshot.js"],"sourcesContent":["import axios from \"axios\";\nimport html2canvas from \"html2canvas\";\n\n// Renamed to lowercase to ensure React never treats it as a component\nconst captureScreenshot = async (element, imageFileName, droppedItems = []) => {\n  try {\n    // Capture the screenshot\n    const canvas = await html2canvas(element, {\n      useCORS: true,\n      allowTaint: true,\n      backgroundColor: \"#ffffff\",\n      scale: 2,\n      logging: false,\n    });\n\n    // Convert canvas to blob\n    const blob = await new Promise((resolve) => {\n      canvas.toBlob(resolve, \"image/png\", 1.0);\n    });\n\n    // Upload to Cloudinary\n    const formData = new FormData();\n    formData.append(\"file\", blob, `${imageFileName}.png`);\n    formData.append(\"upload_preset\", \"outfits_preset\");\n\n    const cloudinaryResponse = await axios.post(\n      \"https://api.cloudinary.com/v1_1/dmjzidsiy/image/upload\",\n      formData\n    );\n\n    const imageUrl = cloudinaryResponse.data.secure_url;\n\n    // Save to JSON server\n    const outfitData = {\n      name: `Outfit ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,\n      image: imageUrl,\n      items: droppedItems.map((item) => item.id),\n      createdAt: new Date().toISOString(),\n    };\n\n    const jsonServerResponse = await axios.post(\n      \"http://localhost:3001/outfits\",\n      outfitData\n    );\n\n    return {\n      success: true,\n      cloudinaryUrl: imageUrl,\n      outfitId: jsonServerResponse.data.id,\n    };\n  } catch (error) {\n    console.error(\"Error capturing/uploading screenshot:\", error);\n    return {\n      success: false,\n      error: error.message,\n    };\n  }\n};\n\nexport default captureScreenshot;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,aAAa;;AAErC;AACA,MAAMC,iBAAiB,GAAG,MAAAA,CAAOC,OAAO,EAAEC,aAAa,EAAEC,YAAY,GAAG,EAAE,KAAK;EAC7E,IAAI;IACF;IACA,MAAMC,MAAM,GAAG,MAAML,WAAW,CAACE,OAAO,EAAE;MACxCI,OAAO,EAAE,IAAI;MACbC,UAAU,EAAE,IAAI;MAChBC,eAAe,EAAE,SAAS;MAC1BC,KAAK,EAAE,CAAC;MACRC,OAAO,EAAE;IACX,CAAC,CAAC;;IAEF;IACA,MAAMC,IAAI,GAAG,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAK;MAC1CR,MAAM,CAACS,MAAM,CAACD,OAAO,EAAE,WAAW,EAAE,GAAG,CAAC;IAC1C,CAAC,CAAC;;IAEF;IACA,MAAME,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEN,IAAI,EAAE,GAAGR,aAAa,MAAM,CAAC;IACrDY,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAE,gBAAgB,CAAC;IAElD,MAAMC,kBAAkB,GAAG,MAAMnB,KAAK,CAACoB,IAAI,CACzC,wDAAwD,EACxDJ,QACF,CAAC;IAED,MAAMK,QAAQ,GAAGF,kBAAkB,CAACG,IAAI,CAACC,UAAU;;IAEnD;IACA,MAAMC,UAAU,GAAG;MACjBC,IAAI,EAAE,UAAU,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,IAAI,IAAID,IAAI,CAAC,CAAC,CAACE,kBAAkB,CAAC,CAAC,EAAE;MACpFC,KAAK,EAAER,QAAQ;MACfS,KAAK,EAAEzB,YAAY,CAAC0B,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,CAAC;MAC1CC,SAAS,EAAE,IAAIR,IAAI,CAAC,CAAC,CAACS,WAAW,CAAC;IACpC,CAAC;IAED,MAAMC,kBAAkB,GAAG,MAAMpC,KAAK,CAACoB,IAAI,CACzC,+BAA+B,EAC/BI,UACF,CAAC;IAED,OAAO;MACLa,OAAO,EAAE,IAAI;MACbC,aAAa,EAAEjB,QAAQ;MACvBkB,QAAQ,EAAEH,kBAAkB,CAACd,IAAI,CAACW;IACpC,CAAC;EACH,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAAC;IAC7D,OAAO;MACLH,OAAO,EAAE,KAAK;MACdG,KAAK,EAAEA,KAAK,CAACE;IACf,CAAC;EACH;AACF,CAAC;AAED,eAAexC,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}